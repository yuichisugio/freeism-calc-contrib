gh api graphql \
  --paginate --slurp \
  -F owner="ryoppippi" \
  -F name="ccusage" \
  -f query='
    query(
    $owner: String!,
    $name: String!,
    $endCursor: String
  ){
    repository(owner:$owner, name:$name){
      ref(qualifiedName:"refs/heads/main"){
        name
        target {
          ... on Commit {
            history(first:50, after:$endCursor) {
              pageInfo { hasNextPage endCursor }
              nodes {
                abbreviatedOid
                oid
                id
                committedDate
                authoredDate
                messageHeadline
                messageBody
                message
                additions
                deletions
                authoredByCommitter
                author {
                  name
                  user {
                    login
                    id
                  }
                }
                authors(first:10) {
                  totalCount
                  nodes {
                    name
                    user { login id }
                  }
                }
                committer {
                  name
                  user { login id }
                }
                commitResourcePath
                commitUrl
                status{
                  id
                  state
                }
                url
                associatedPullRequests(first:3) {
                  nodes {
                    author { login resourcePath url }
                    baseRefName
                    body
                    bodyText
                    closed
                    closedAt
                    createdAt
                    deletions
                    editor{ login url }
                    fullDatabaseId
                    id
                    mergeStateStatus
                    mergeable
                    merged
                    mergedAt
                    mergedBy { login }
                    number
                    permalink
                    publishedAt
                    reactionGroups{content reactors { totalCount }}
                    resourcePath
                    reviewDecision
                    state
                    title
                    totalCommentsCount
                    updatedAt
                    url
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  ' | jq '.' >"./src/designated-oss-growth/github-developer-contrib/archive/commit/commit-pullreq-3.json"
